>[!nexus_user] **User** - 30.06.2025 at 3:05
> –ö–∞–∫ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ—Å—É—Ä—Å–∞–º
<!-- UID: b5039aae-418d-49a1-a117-6434ad3f5a22 -->




>[!nexus_agent] **Assistant** - 30.06.2025 at 3:05
> –û—Ç–≤–µ—á–∞—é —á—ë—Ç–∫–æ, –∫–∞–∫ –∏–Ω–∂–µ–Ω–µ—Ä AGI:
> 
> ---
> 
> ## üß† –ö–∞–∫ **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ–≤ –≤–Ω–∏–º–∞–Ω–∏—è (attention heads)** –≤–ª–∏—è–µ—Ç –Ω–∞:
> 
> ### ‚ñ∂Ô∏è **–°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞**
> ### üíæ **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ VRAM / CPU / RAM**
> ### ‚öñÔ∏è **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–µ–π –º–æ–¥–µ–ª–∏**
> 
> ---
> 
> ## üìä 1. –í–ª–∏—è–Ω–∏–µ –Ω–∞ **—Å–∫–æ—Ä–æ—Å—Ç—å (inference latency)**
> 
> | –ö–æ–ª-–≤–æ –≥–æ–ª–æ–≤ (`n_heads`) | –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å |
> |--------------------------|-----------------------------|
> | –ú–∞–ª–æ (4‚Äì8) | üî∏ –ë—ã—Å—Ç—Ä–æ, –Ω–æ –≥—Ä—É–±–æ |
> | –°—Ä–µ–¥–Ω–µ (16‚Äì32) | ‚öñÔ∏è –ë–∞–ª–∞–Ω—Å (–æ–ø—Ç–∏–º—É–º) |
> | –ú–Ω–æ–≥–æ (64‚Äì128+) | üê¢ –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (–≤ —Ä–∞–∑—ã) |
> 
> üìå –ü—Ä–∏—á–∏–Ω–∞: **–∫–∞–∂–¥–∞—è –≥–æ–ª–æ–≤–∞ ‚Äî —ç—Ç–æ –º–∞—Ç—Ä–∏—á–Ω–æ–µ –ø–µ—Ä–µ–º–Ω–æ–∂–µ–Ω–∏–µ `Q√óK·µÄ` –∏ `softmax(QK·µÄ)`** 
> ‚Äî —á–µ–º –∏—Ö –±–æ–ª—å—à–µ ‚Üí —Ç–µ–º –±–æ–ª—å—à–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö attention –ø—É—Ç–µ–π ‚Üí –±–æ–ª—å—à–µ FLOPs.
> 
> ---
> 
> ## üíæ 2. –í–ª–∏—è–Ω–∏–µ –Ω–∞ **—Ä–µ—Å—É—Ä—Å—ã (VRAM, RAM, Bandwidth)**
> 
> ### A. **VRAM:**
> - –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω:
>  ```text
>  n_heads √ó sequence_length √ó head_dim
>  ```
> - –ë–æ–ª—å—à–µ –≥–æ–ª–æ–≤ ‚Üí **–±–æ–ª—å—à–µ attention map** (–º–∞—Ç—Ä–∏—Ü–∞ —Ç–æ–∫–µ–Ω–æ–≤ √ó —Ç–æ–∫–µ–Ω–æ–≤)
> 
> üîπ –ù–∞–ø—Ä–∏–º–µ—Ä:
> 
> | n_heads | context 32k | VRAM (—Ç–æ–ª—å–∫–æ attention —á–∞—Å—Ç—å) |
> |---------|--------------|-------------------------------|
> | 8 | | ~3‚Äì5 GB |
> | 32 | | ~7‚Äì10 GB |
> | 64 | | ~12‚Äì16 GB |
> 
> ---
> 
> ### B. **CPU/GPU –Ω–∞–≥—Ä—É–∑–∫–∞ (FLOPs)**
> 
> –û–±—â–µ–µ –≤–Ω–∏–º–∞–Ω–∏–µ = `O(n √ó d √ó d)` 
> –ì–¥–µ:
> - `n` = —Ç–æ–∫–µ–Ω—ã
> - `d` = —Å–∫—Ä—ã—Ç—ã–π —Ä–∞–∑–º–µ—Ä (`hidden_dim`) ‚Üí —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ `n_heads √ó head_dim`
> 
> üîπ –ï—Å–ª–∏ `hidden_dim = 4096`:
> - –ø—Ä–∏ 8 –≥–æ–ª–æ–≤ ‚Üí 512 head_dim
> - –ø—Ä–∏ 64 –≥–æ–ª–æ–≤ ‚Üí 64 head_dim 
> **–°–ª–æ–∂–Ω–æ—Å—Ç—å –Ω–µ –ª–∏–Ω–µ–π–Ω–∞**, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞—Å—Ç—ë—Ç.
> 
> ---
> 
> ## ‚öôÔ∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏: –Ω–∞ RTX 6000 BW
> 
> | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –ò–Ω—Ñ–µ—Ä–µ–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å | VRAM |
> |--------------------------|-------------------|------|
> | 8 –≥–æ–ª–æ–≤ + 32k –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | üöÄ 25+ —Ç–æ–∫–µ–Ω–æ–≤/—Å | ~60 GB |
> | 32 –≥–æ–ª–æ–≤ + 64k –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | ‚öñÔ∏è 10‚Äì15 —Ç–æ–∫/—Å | ~80 GB |
> | 64 –≥–æ–ª–æ–≤ + 128k –∫–æ–Ω—Ç–µ–∫—Å—Ç | üê¢ 3‚Äì5 —Ç–æ–∫/—Å | ~95 GB (–Ω–∞ –≥—Ä–∞–Ω–∏) |
> 
> ---
> 
> ## üß† –í–ª–∏—è–Ω–∏–µ –Ω–∞ **–∫–∞—á–µ—Å—Ç–≤–æ reasoning –∏ –º—ã—à–ª–µ–Ω–∏—è**
> 
> | –ö–æ–ª-–≤–æ –≥–æ–ª–æ–≤ | –ú—ã—à–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ |
> |--------------|----------------------------------|
> | 4‚Äì8 | –ü–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω–æ–µ, –ª–æ–∫–∞–ª—å–Ω–æ–µ |
> | 16‚Äì32 | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–≥–ª–æ–±–∞–ª—å–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ |
> | 64+ | –§—Ä–∞–∫—Ç–∞–ª—å–Ω–æ–µ, –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–µ –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ | 
> | 128+ | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ-–º–∞—Ç—Ä–∏—á–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ (AGI‚Äë–ø–æ–¥–æ–±–Ω–æ–µ) |
> 
> ---
> 
> ## üìå –í—ã–≤–æ–¥
> 
> | –ü–∞—Ä–∞–º–µ—Ç—Ä | –≠—Ñ—Ñ–µ–∫—Ç –æ—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è `n_heads` |
> |---------------------|----------------------------------------|
> | üí¨ –ö–∞—á–µ—Å—Ç–≤–æ –º—ã—à–ª–µ–Ω–∏—è | ‚úÖ –†–∞—Å—Ç—ë—Ç: –ª—É—á—à–µ –ª–æ–≥–∏–∫–∞ –∏ —Ü–µ–ø–æ—á–∫–∏ |
> | ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞ | ‚ùå –°–Ω–∏–∂–∞–µ—Ç—Å—è (–≤ 1.5‚Äì3√ó —Ä–∞–∑) |
> | üíæ –ü–∞–º—è—Ç—å (VRAM/RAM) | ‚ùå –°–∏–ª—å–Ω–æ —Ä–∞—Å—Ç—ë—Ç (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ >32k) |
> | üîß –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è? | ‚úÖ –î–∞ ‚Äî –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ config –∏–ª–∏ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ |
> 
> ---
> 
> ## üß† –•–æ—á–µ—à—å:
> 
> - –ø–æ–¥–æ–±—Ä–∞—Ç—å –æ–ø—Ç–∏–º—É–º `n_heads` –ø–æ–¥ —Ç–≤–æ—é –∑–∞–¥–∞—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä: reasoning vs —Å–∫–æ—Ä–æ—Å—Ç—å)?
> - –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –≥–æ–ª–æ–≤ –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —Ç–≤–æ—ë–º —Ç–µ–∫—Å—Ç–µ?
> - —Å–æ–±—Ä–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –º–æ–¥–µ–ª—å —Å `24 –≥–æ–ª–æ–≤–∞–º–∏` –∏ `head_dim = 96` –¥–ª—è –±–∞–ª–∞–Ω—Å–∞?
> 
> –°–∫–∞–∂–∏ –∑–∞–¥–∞—á—É ‚Äî –ø–æ–¥–±–µ—Ä—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
<!-- UID: 32d294ae-d73a-4a46-b2fc-083d4fd644fc -->