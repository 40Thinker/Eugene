>[!nexus_user] **User** - 30.06.2025 at 2:53
> –ü–æ–¥ –º–æ—é –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ–ø–∞–º—è—Ç—å?
<!-- UID: 5db0431d-5041-4ebf-9e1d-c106b7433f21 -->




>[!nexus_agent] **Assistant** - 30.06.2025 at 2:53
> –û—Ç–≤–µ—á–∞—é —Ç–æ—á–Ω–æ –ø–æ–¥ —Ç–≤–æ—é –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—É **RTX 6000 Blackwell (96‚Äì98‚ÄØGB VRAM)** –∏ –ø–æ–¥ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—é `Qwen3-30B-A6B-16-Extreme`.
> 
> ---
> 
> ## üß† –ß—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ VRAM –≤ —ç—Ç–æ–π –º–æ–¥–µ–ª–∏
> 
> | –ü–∞—Ä–∞–º–µ—Ç—Ä | –í–ª–∏—è–Ω–∏–µ –Ω–∞ VRAM |
> |-----------------------|------------------|
> | **–†–∞–∑–º–µ—Ä –º–æ–¥–µ–ª–∏** (`30B`, FP16) | ~60‚Äì70‚ÄØGB –≤–µ—Å–∞ –≤ –ø–∞–º—è—Ç–∏ |
> | **MOE: `num_experts_per_tok = 16`** | +20‚Äì40‚ÄØ% —Ä–æ—Å—Ç VRAM (–±–æ–ª—å—à–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ª–æ—ë–≤) |
> | **–ö–æ–Ω—Ç–µ–∫—Å—Ç (`128k`)** | **–õ–∏–Ω–µ–π–Ω—ã–π —Ä–æ—Å—Ç KV‚Äë–∫–µ—à–µ–π** ‚Üí —Å–∞–º–∞—è —Ç—è–∂—ë–ª–∞—è —á–∞—Å—Ç—å |
> | **Batch size** | –ü—Ä—è–º–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω —Ä–æ—Å—Ç—É –∫–µ—à–µ–π –∏ –±—É—Ñ–µ—Ä–æ–≤ |
> | **–§–æ—Ä–º–∞—Ç (Int4, FP16)** | FP16 —Ç—Ä–µ–±—É–µ—Ç √ó2 –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏, –Ω–æ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π reasoning |
> 
> ---
> 
> ## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á—ë—Ç–∞ VRAM‚Äë–Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Ç–≤–æ–µ–π –∫–∞—Ä—Ç–µ
> 
> | –£—Å–ª–æ–≤–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ VRAM |
> |-----------------------------|---------------------|
> | `Qwen3-30B-A6B` + 8 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ + 32k context | ~70‚Äì75‚ÄØGB (–≤ FP16) |
> | `Qwen3-30B-A6B-16` + 128k context | **85‚Äì98‚ÄØGB** (–Ω–∞ –≥—Ä–∞–Ω–∏) |
> | `Qwen3-30B-A6B-16` + 64k context | ~80‚Äì85‚ÄØGB ‚Äî –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ |
> | –¢–æ—Ç –∂–µ –≤ Int4 (AWQ, GPTQ) | ~30‚Äì40‚ÄØGB ‚Äî –º–æ–∂–Ω–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å |
> 
> ---
> 
> ## üìå –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –¥–∞—ë—Ç —Ä–æ—Å—Ç VRAM?
> 
> ### 1. `num_experts_per_tok = 16`
> - –û–∑–Ω–∞—á–∞–µ—Ç: –≤ **–∫–∞–∂–¥–æ–º MoE-—Å–ª–æ–µ** —Ç–µ–ø–µ—Ä—å **–∞–∫—Ç–∏–≤–Ω–æ –Ω–µ 8, –∞ 16 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ –∏–∑ 128**
> - **–í–µ—Å–∞ –Ω–µ —É–¥–≤–∞–∏–≤–∞—é—Ç—Å—è** ‚Äî –Ω–æ **–æ–±—ä—ë–º –±—É—Ñ–µ—Ä–æ–≤ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–π —Ä–∞—Å—Ç—ë—Ç**
> - –ü—Ä–∏–º–µ—Ä–Ω—ã–π –ø—Ä–∏—Ä–æ—Å—Ç: **+25‚Äì40‚ÄØ%** –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é VRAM
> 
> ---
> 
> ### 2. `128k context`
> - –ö–∞–∂–¥–æ–µ —É–¥–≤–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —É–¥–≤–∞–∏–≤–∞–µ—Ç **KV-–∫–µ—à–∏** (–∫–ª—é—á–∏/–∑–Ω–∞—á–µ–Ω–∏—è)
> - KV-–∫–µ—à–∏ ‚Äî **—Å–∞–º–∞—è —Ç—è–∂—ë–ª–∞—è —á–∞—Å—Ç—å –ø—Ä–∏ inference**
> - –ü—Ä–∏—Ä–æ—Å—Ç VRAM: **~3‚Äì4√ó –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å 32k –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**
> 
> ---
> 
> ## ‚úÖ –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Ç–≤–æ—é RTX 6000:
> 
> | –ü—Ä–∏—ë–º | –†–µ–∑—É–ª—å—Ç–∞—Ç |
> |-------------------------|------------------------|
> | –£–º–µ–Ω—å—à–∏—Ç—å context –¥–æ 64k | -15‚Äì20‚ÄØGB |
> | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Int4` | -50‚Äì60‚ÄØ% –Ω–∞–≥—Ä—É–∑–∫–∏ |
> | –†–∞–∑–±–∏—Ç—å batch | –í 1 –ø—Ä–æ–≥–æ–Ω–µ ‚â§ 1 –∑–∞–ø—Ä–æ—Å–∞ |
> | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rope-scaling` –ø—Ä–∞–≤–∏–ª—å–Ω–æ | –°–Ω–∏–∂–µ–Ω–∏–µ OOM —Ä–∏—Å–∫–∞ |
> | –ü–æ–¥–≥—Ä—É–∑–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤ —á–∞—Å—Ç—è–º–∏ | ‚ö†Ô∏è –≤–æ–∑–º–æ–∂–Ω–æ —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π LLAMA.CPP |
> 
> ---
> 
> ## üìò –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
> 
> | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –ü–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞ RTX 6000 BW? |
> |----------------------------------------|---------------------------|
> | Qwen3-30B, FP16, 8 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, 32k ctx | ‚úÖ –ª–µ–≥–∫–æ |
> | Qwen3-30B, FP16, 16 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, 128k ctx | ‚ö†Ô∏è **–Ω–∞ –≥—Ä–∞–Ω–∏** ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã OOM |
> | Qwen3-30B, AWQ Int4, 16 —ç–∫—Å–ø–µ—Ä—Ç–æ–≤, 128k | ‚úÖ –î–∞ (40‚Äì50‚ÄØGB) |
> 
> ---
> 
> –•–æ—á–µ—à—å:
> - –ü–æ–¥–±–µ—Ä—É —Ç–µ–±–µ **—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞**
> - –°–¥–µ–ª–∞—é `shell launcher` –∏–ª–∏ `text-gen-webui preset`
> - –ù–∞—Å—Ç—Ä–æ—é quant (AWQ / GPTQ), —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å **–¥–≤–µ –º–æ–¥–µ–ª–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**
> 
> –°–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ —Ç–µ–±–µ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ? –ï—Å–ª–∏ ‚â§ 64k ‚Äî –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë –±–µ–∑ –±–æ–ª–∏.
<!-- UID: 9f8b0e39-d1b0-4668-b695-f7faa85be68e -->