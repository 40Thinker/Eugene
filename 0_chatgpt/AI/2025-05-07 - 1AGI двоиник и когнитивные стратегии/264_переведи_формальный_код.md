>[!nexus_user] **User** - 08.05.2025 at 17:39
> Переведи формальный код.
<!-- UID: bbb2107d-b345-4856-8a83-cd44d69b32b6 -->




>[!nexus_agent] **Assistant** - 08.05.2025 at 17:39
> Вот перевод архитектуры доказательства **гипотезы Коллатца** в **формализуемый стиль языка Lean 4**. Он разбит по блокам, каждый можно при необходимости доработать в полноценный Lean-скрипт.
> 
> ---
> 
> ## **1. Базовые определения: шаг Коллатца и последовательность**
> 
> ```lean
> def collatz_step (n : ℕ) : ℕ :=
>  if n % 2 = 0 then n / 2 else 3 * n + 1
> ```
> 
> ```lean
> partial def collatz_seq : ℕ → List ℕ
> | 1 => [1]
> | n => n :: collatz_seq (collatz_step n)
> ```
> 
> ---
> 
> ## **2. Определение завершения (терминации)**
> 
> ```lean
> def collatz_terminates (n : ℕ) : Prop :=
>  ∃ k : ℕ, (List.nth (collatz_seq n) k) = some 1
> ```
> 
> ---
> 
> ## **3. Гипотеза Коллатца (мягкая формулировка)**
> 
> ```lean
> theorem collatz_hypothesis : ∀ n : ℕ, collatz_terminates n := sorry
> ```
> 
> ---
> 
> ## **4. Модульное разбиение по остаткам (для доказательства)**
> 
> ```lean
> def is_even (n : ℕ) : Prop := n % 2 = 0
> def is_odd (n : ℕ) : Prop := n % 2 = 1
> ```
> 
> ---
> 
> ## **5. Инвариант убывания (логарифмическая скорость)**
> 
> ```lean
> def log_speed (seq : List ℕ) : Option ℝ :=
>  match seq.length, seq.getLast? with
>  | 0, _ => none
>  | _, some x => some (Real.log x / seq.length.toReal)
>  | _, none => none
> ```
> 
> ---
> 
> ## **6. Контрпример (если гипотеза неверна)**
> 
> ```lean
> def is_counterexample (n : ℕ) : Prop :=
>  ∀ k : ℕ, List.nth (collatz_seq n) k ≠ some 1
> ```
> 
> ```lean
> theorem no_counterexample : ¬ ∃ n : ℕ, is_counterexample n := sorry
> ```
> 
> ---
> 
> ## **7. План доказательства (структура):**
> 
> ```lean
> theorem collatz_converges (n : ℕ) : ∃ k, collatz_step^[k] n = 1 := sorry
> ```
> 
> ---
> 
> ### **Примечания:**
> 
> - Для полного формального доказательства в Lean нужно использовать `well_founded` рекурсию и доказывать, что `collatz_step` убывает по определённой метрике.
> - Функция `collatz_seq` должна быть `partial`, так как Lean требует доказательства терминации.
> - Реальное завершённое доказательство в Lean не существует (на 2024 год), но структура выше — отправная точка для формализации.
> 
> ---
> 
> Хочешь, чтобы я теперь **сформировал файл .lean или вывел текст полностью в формате для IDE Lean**, или продолжить работу над другим неразрешённым утверждением?
<!-- UID: c221b5fa-21f4-40d5-b69f-5981c84f1d93 -->