>[!nexus_user] **User** - 28.07.2025 at 13:21
> Vllm –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –º–µ–∂–¥—É vram ram?
<!-- UID: 9927a0f4-8169-4f1f-aa89-6ae877bd5dc2 -->




>[!nexus_agent] **Assistant** - 28.07.2025 at 13:21
> –¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–º–µ—Ç–∏–ª: **vLLM –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –º–µ–∂–¥—É VRAM –∏ RAM**. –ù–∏–∂–µ ‚Äî —Ç–æ—á–Ω–æ–µ —Ä–∞–∑—ä—è—Å–Ω–µ–Ω–∏–µ.
> 
> ---
> 
> ## üîç –ß—Ç–æ vLLM *–Ω–µ –¥–µ–ª–∞–µ—Ç* (–ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ 2025):
> 
> | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ vLLM? | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
> |-------------|-------------------------|-------------|
> | **Offloading –≤–µ—Å–æ–≤ –º–æ–¥–µ–ª–∏ –∏–∑ VRAM –≤ RAM** | ‚ùå **–ù–µ—Ç** | vLLM —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –º–æ–¥–µ–ª—å —Ü–µ–ª–∏–∫–æ–º –ø–æ–º–µ—Å—Ç–∏–ª–∞—Å—å –≤ VRAM |
> | **Offload KV-–∫—ç—à–∞ (Key-Value Cache) –≤ RAM** | ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ** (–≤ –±—É–¥—É—â–µ–º) | –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è, –Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
> | **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –º–µ–∂–¥—É GPU –∏ CPU (–ø–æ—Ö–æ–∂–µ–µ –Ω–∞ DeepSpeed Zero-3)** | ‚ùå **–ù–µ—Ç** | –ù–µ—Ç –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ |
> | **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤ –º–µ–∂–¥—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ GPU (tensor parallelism)** | ‚ö†Ô∏è **–¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è** | –í–µ—Ç–∫–∞ Multi-GPU alpha: –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–ª—è A100/H100 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ |
> 
> ---
> 
> ## ‚úÖ –ß—Ç–æ vLLM *—É–º–µ–µ—Ç*:
> 
> | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
> |-------------|-------------|
> | ‚ö° –í—ã—Å–æ–∫–æ–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π **KV-–∫—ç—à** (–¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–ª–∏–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞) | –≠—Ç–æ –µ–≥–æ –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ |
> | üß† –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **PagedAttention** ‚Äî —É—Å–∫–æ—Ä–µ–Ω–∏–µ + —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏ | –û—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è batched inference |
> | üì¶ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **FlashAttention v2** | –°–∏–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞ FP16/FP32 |
> | üìú –°–æ–≤–º–µ—Å—Ç–∏–º —Å HuggingFace, OpenAI API, ggml, exllama v2 (—á–∞—Å—Ç–∏—á–Ω–æ) | API-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —É–¥–æ–±–Ω–∞ –¥–ª—è –∑–∞–º–µ–Ω—ã inference backend |
> 
> ---
> 
> ## üìå –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è —Ç–µ–±—è
> 
> –£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ —É —Ç–µ–±—è **96‚ÄØGB VRAM**, —ç—Ç–æ –º–Ω–æ–≥–æ ‚Äî —Ç—ã —Å–º–æ–∂–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å:
> - **Qwen 72B** FP16 –±–µ–∑ –ø—Ä–æ–±–ª–µ–º;
> - **Qwen 110B** (–≤–æ–∑–º–æ–∂–Ω–æ, —Å 8-bit –∏–ª–∏ Q4) –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏;
> - –ù–æ **235B+** –∏–ª–∏ **480B (Qwen-Coder)** *–Ω–µ –ø–æ–º–µ—Å—Ç—è—Ç—Å—è* –±–µ–∑ offload –≤ RAM ‚Äî **–∞ vLLM —ç—Ç–æ–≥–æ –Ω–µ —É–º–µ–µ—Ç**.
> 
> ---
> 
> ## üõ† –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ vLLM, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å offload:
> 
> | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ offload | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
> |--------------|-------------------|-------------|
> | **HuggingFace Transformers + Accelerate** | ‚úÖ –ü–æ–ª–Ω–∞—è | –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å `device_map='auto'` –∏–ª–∏ –≤—Ä—É—á–Ω—É—é |
> | **DeepSpeed (Zero-3 –∏–ª–∏ Offload)** | ‚úÖ –ü–æ–ª–Ω–∞—è | –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞: –º–æ–¥–µ–ª—å —á–∞—Å—Ç–∏—á–Ω–æ –≤ VRAM, —á–∞—Å—Ç–∏—á–Ω–æ –≤ RAM |
> | **llama.cpp / GGUF stack** | ‚úÖ –ß–µ—Ä–µ–∑ CPU inference –∏ offload layers | –û—Å–æ–±–µ–Ω–Ω–æ —Å GGUF Q4_K_M –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Å–ª–æ—ë–≤ |
> | **Exllama v2** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫—É—Å–æ—á–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
> 
> ---
> 
> ## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
> 
> –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å **–æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –º–æ–¥–µ–ª–∏ (235B+)**, —Ç–æ:
> - vLLM ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É —Ç–µ–±—è **>=192‚ÄØGB VRAM** –∏–ª–∏ **–º–Ω–æ–≥–æ–∫–∞—Ä—Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (multi-GPU A100/H100)**
> - –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–π **HF Transformers + Accelerate** —Å `device_map="auto"` ‚Äî –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫–∏–¥–∞–µ—Ç –º–æ–¥–µ–ª—å –º–µ–∂–¥—É VRAM –∏ RAM
> 
> –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —Å–æ–±–µ—Ä—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –ø–æ–¥ —Ç–≤–æ–π —Å—Ç–µ–∫ (`config.yaml` –∏–ª–∏ `run.py`), –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ hybrid inference.
<!-- UID: fe13fb6b-0a52-43ac-9363-7d3712a2885b -->