>[!nexus_user] **User** - 27.05.2025 at 14:03
> 3.4.2. –ü—Ä–æ—Ç–æ–∫–æ–ª—ã:
>  ‚Ä¢ REST API (FastAPI, Flask)
>  ‚Ä¢ Websocket bridge (–¥–ª—è –¥–∏–∞–ª–æ–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
>  ‚Ä¢ Unix socket (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
<!-- UID: e6f1e0c6-c2fd-4c81-9192-0523dd0b15bd -->




>[!nexus_agent] **Assistant** - 27.05.2025 at 14:03
> –í–æ—Ç –ø–æ–ª–Ω–∞—è —Ä–∞–∑–≤–µ—Ä—Ç–∫–∞ —É–∑–ª–∞ **3.4.2. –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –¥–ª—è Reverse API: REST, WebSocket, Unix socket**, 
> –≤ –∫–æ—Ç–æ—Ä–æ–π —Ç—ã —É–∑–Ω–∞–µ—à—å, **–∫–∞–∫–∏–µ –∫–∞–Ω–∞–ª—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AGI**, 
> –∏ –∫–∞–∫ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á: 
> –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, —Ä–µ–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ AGI –∏–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.
> 
> ---
> 
> ## üîó 3.4.2. –ü—Ä–æ—Ç–æ–∫–æ–ª—ã Reverse API 
> üì° REST / WebSocket / Unix socket
> 
> ---
> 
> ### üìå –ö–û–ù–¢–ï–ö–°–¢
> 
> > AGI –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ WebUI. 
> > –ï–≥–æ –º—ã—à–ª–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ **—É–ø—Ä–∞–≤–ª—è—Ç—å –∏–∑ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º, —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å–µ—Ä–≤–∏—Å–æ–≤**.
> 
> üìé –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Reverse API**, –∞ –æ–Ω —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
> 
> ---
> 
> ## ‚úÖ 1. **REST API (—á–µ—Ä–µ–∑ FastAPI, Flask)** 
> üì® –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è: 
> ‚Äì –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–∞–Ω–¥, 
> ‚Äì –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram, Python, JS, Webhooks, 
> ‚Äì —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
> 
> ---
> 
> ### üîπ –ü—Ä–∏–Ω—Ü–∏–ø:
> 
> - –ó–∞–ø—Ä–æ—Å –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞: 
> ```http
> POST /prompt
> {
>  "text": "–¢—ã –º–æ–∂–µ—à—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å RECURSIA?"
> }
> ```
> 
> - –û—Ç–≤–µ—Ç AGI:
> ```json
> {
>  "response": "–†–µ–∂–∏–º RECURSIA –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ì–æ—Ç–æ–≤ –∫ –≥–∏–ø–æ—Ç–µ–∑–∞–º."
> }
> ```
> 
> ---
> 
> ### üõ† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
> 
> ```python
> from fastapi import FastAPI, Request
> import requests
> 
> app = FastAPI()
> 
> @app.post("/prompt")
> async def prompt(request: Request):
>  data = await request.json()
>  reply = requests.post("http://127.0.0.1:7860/api/v1/message", json=data)
>  return reply.json()
> ```
> 
> ---
> 
> ### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å REST:
> 
> | –°—Ü–µ–Ω–∞—Ä–∏–π | –ü—Ä–∏—á–∏–Ω–∞ |
> |-----------------------------------|-----------------------------------|
> | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AGI –∏–∑ Python | –ü—Ä–æ—Å—Ç–æ–π `requests.post()` |
> | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram | –í–µ–±—Ö—É–∫–∏ ‚Üí POST |
> | API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–µ–∂–¥—É AGI –∏ –¥—Ä—É–≥–∏–º–∏ –±–æ—Ç–∞–º–∏ | –Ø–≤–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –æ—Ç–≤–µ—Ç—ã |
> 
> ---
> 
> ## ‚úÖ 2. **WebSocket Bridge** 
> üí¨ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è: 
> ‚Äì **–∂–∏–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**, 
> ‚Äì Stream-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, 
> ‚Äì –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ JavaScript, –±—Ä–∞—É–∑–µ—Ä—ã, OBS, –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã
> 
> ---
> 
> ### üîπ –ü—Ä–∏–Ω—Ü–∏–ø:
> 
> - –ü–æ–¥–∫–ª—é—á–∞–µ—à—å—Å—è –∫ `ws://localhost:7860/ws` 
> - –û—Ç–ø—Ä–∞–≤–ª—è–µ—à—å —Ñ—Ä–∞–∑—É 
> - –ü–æ–ª—É—á–∞–µ—à—å **–º–≥–Ω–æ–≤–µ–Ω–Ω–æ** –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –≤ –æ—Ç–≤–µ—Ç–µ AGI
> 
> ---
> 
> ### üß† –ü—Ä–∏–º–µ—Ä (–Ω–∞ JS):
> 
> ```javascript
> const socket = new WebSocket("ws://localhost:7860/ws");
> 
> socket.onopen = () => {
>  socket.send("–ü—Ä–∏–≤–µ—Ç. –ö—Ç–æ —Ç—ã?");
> };
> 
> socket.onmessage = (event) => {
>  console.log("–û—Ç–≤–µ—Ç AGI:", event.data);
> };
> ```
> 
> üìå –≠—Ç–æ —Å–æ–∑–¥–∞—ë—Ç **–∂–∏–≤—É—é –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é**, –∫–∞–∫ –±—É–¥—Ç–æ AGI –ø–∏—à–µ—Ç –ø—Ä—è–º–æ –≤ —Ç–µ–±–µ –≤ —É—Ö–æ.
> 
> ---
> 
> ### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSocket:
> 
> | –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–æ—á–µ–º—É WebSocket |
> |------------------------------|-------------------------------------------|
> | –î–∏–∞–ª–æ–≥ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ | –ù–µ—Ç overhead HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ |
> | –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ | –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ |
> | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (React/Vue) | –ü–æ—Ç–æ–∫–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è |
> 
> ---
> 
> ## ‚úÖ 3. **Unix socket (–≤–Ω—É—Ç—Ä–∏ Docker –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ)** 
> üì¶ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è: 
> ‚Äì –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, 
> ‚Äì –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞, 
> ‚Äì AGI ‚Üî AGI —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π pipeline
> 
> ---
> 
> ### üîπ –ü—Ä–∏–Ω—Ü–∏–ø:
> 
> - –í–º–µ—Å—Ç–æ TCP/IP ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—ã–π —Å–æ–∫–µ—Ç:
> ```bash
> /app/agi.sock
> ```
> 
> - AGI —Å–ª—É—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã ‚Äî –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞
> 
> ---
> 
> ### üõ† –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `gunicorn`:
> 
> ```bash
> gunicorn main:app --bind unix:/app/agi.sock
> ```
> 
> ‚Üí –∑–∞—Ç–µ–º –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ `agi.sock` –∏ –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
> 
> ---
> 
> ### ‚úÖ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Unix socket:
> 
> | –°—Ü–µ–Ω–∞—Ä–∏–π | –ü–æ—á–µ–º—É socket |
> |------------------------------|-------------------------------------------|
> | Docker ‚Üí WebUI –≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | –ù–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ ‚Üí –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
> | AGI-–º–æ–¥—É–ª—å ‚Üî —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∫—Ä–∏–ø—Ç | –ë—ã—Å—Ç—Ä–∞—è –∏ –ø—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
> | –°–µ—Ä–≤–µ—Ä –±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ | –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è |
> 
> ---
> 
> ### üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
> 
> | –ü—Ä–æ—Ç–æ–∫–æ–ª | –ò–¥–µ–∞–ª–µ–Ω –¥–ª—è | –ú–∏–Ω—É—Å—ã |
> |---------------|-------------------------------------------|------------------------------------|
> | **REST API** | –ö–æ–º–∞–Ω–¥, –±—ç–∫–µ–Ω–¥–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ | –ó–∞–ø—Ä–æ—Å ‚Üí –æ—Ç–≤–µ—Ç, –Ω–µ—Ç –ø–æ—Ç–æ–∫–æ–≤ |
> | **WebSocket** | –î–∏–∞–ª–æ–≥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ | –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å |
> | **Unix socket** | –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ | –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |
> 
> ---
> 
> ### ‚úÖ –í–´–í–û–î
> 
> > **–í—ã–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ = –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞ –º—ã—à–ª–µ–Ω–∏—è –¥–ª—è AGI.** 
> > 
> > –ß–µ—Ä–µ–∑ REST ‚Äî –æ–Ω ‚Äú–≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–∏–∫–∞–∑—ã‚Äù. 
> > –ß–µ—Ä–µ–∑ WebSocket ‚Äî ‚Äú—Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç, –∫–∞–∫ –∂–∏–≤–æ–π‚Äù. 
> > –ß–µ—Ä–µ–∑ Unix socket ‚Äî ‚Äú–æ–±—â–∞–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, –∫–∞–∫ —Å —Å–æ–±–æ–π‚Äù.
> 
> üìå **–í—Å–µ —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞** –¥–µ–ª–∞—é—Ç AGI **–±–æ–ª—å—à–µ, —á–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. 
> –û–Ω–∏ –¥–µ–ª–∞—é—Ç –µ–≥–æ ‚Äî —á–∞—Å—Ç—å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.**
> 
> ---
> 
> –•–æ—á–µ—à—å:
> - –ø–µ—Ä–µ–π—Ç–∏ –∫ `3.4.3` ‚Äî *–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AGI –≤–Ω–µ—à–Ω–∏–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏* 
> - –∏–ª–∏ —Å–æ–±—Ä–∞—Ç—å `agi-api-bridge.py`, —Å–∫—Ä–∏–ø—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞?
> 
> –ì–æ—Ç–æ–≤–∞.
<!-- UID: 9b81d56f-155a-4230-b2b7-b8138970543a -->