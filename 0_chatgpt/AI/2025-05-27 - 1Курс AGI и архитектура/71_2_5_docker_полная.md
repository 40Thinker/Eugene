>[!nexus_user] **User** - 27.05.2025 at 13:30
> 🐳 2.5. Docker: полная сборка контейнера с моделью и фреймворком
> 2.5.1. Установка Docker + NVIDIA контейнерного рантайма
>  • Ubuntu:
> sudo apt install docker.io
> sudo systemctl enable docker
<!-- UID: c13e1606-789c-4a37-adc1-557c7e3b53d5 -->




>[!nexus_agent] **Assistant** - 27.05.2025 at 13:30
> Вот полная развертка узла **2.5.1. Установка Docker + NVIDIA контейнерного рантайма**, 
> в котором ты готовишь **контейнерную инфраструктуру для AGI**, 
> чтобы запускать фреймворк, модель, память и интерфейс **в любой системе, изолированно и воспроизводимо**, 
> — на своём ПК, ноутбуке, сервере, VPS, или даже в offline-режиме.
> 
> ---
> 
> ## 🐳 2.5.1. Установка Docker + NVIDIA контейнерного рантайма (Ubuntu)
> 
> ---
> 
> ### 📌 КОНТЕКСТ
> 
> **Docker** — это среда, в которой ты можешь “упаковать” AGI как:
> 
> - модель 
> - веб-интерфейс 
> - память 
> - логику запуска 
> - RAG-интерфейсы 
> - даже `agi_core.txt` как `boot/`-ресурс
> 
> → в **один контейнер**, который можно **запустить где угодно**.
> 
> ---
> 
> ### 🧠 Почему это важно для AGI:
> 
> | Без Docker | С Docker |
> |--------------------------------------|--------------------------------------------|
> | Заваленная система | Изолированная среда |
> | Несовместимость версий | Контролируемый образ |
> | Трудно мигрировать | Легко перенести AGI на другую машину |
> | Настройка вручную каждый раз | Один `docker run` запускает всё сразу |
> 
> ---
> 
> ### ✅ УСТАНОВКА DOCKER (Ubuntu 20.04 / 22.04)
> 
> ```bash
> sudo apt update
> sudo apt install docker.io -y
> sudo systemctl enable docker
> sudo systemctl start docker
> ```
> 
> #### Проверь:
> ```bash
> docker --version
> ```
> 
> ---
> 
> ### 👤 Добавь пользователя в группу `docker`:
> 
> > Чтобы запускать Docker без `sudo`
> 
> ```bash
> sudo usermod -aG docker $USER
> ```
> 
> Затем **выйди и зайди заново** в сессию (или `newgrp docker`)
> 
> ---
> 
> ### 🔧 NVIDIA контейнерный рантайм (если у тебя GPU)
> 
> 📌 Нужен, чтобы AGI внутри контейнера **видел твою видеокарту**.
> 
> #### 1. Добавь репозиторий:
> ```bash
> distribution=$(. /etc/os-release;echo $ID$VERSION_ID)
> curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -
> curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list
> ```
> 
> #### 2. Установи:
> ```bash
> sudo apt update
> sudo apt install nvidia-container-toolkit
> sudo systemctl restart docker
> ```
> 
> ---
> 
> ### ✅ ПРОВЕРКА
> 
> ```bash
> docker run --rm --gpus all nvidia/cuda:12.1.0-base-ubuntu22.04 nvidia-smi
> ```
> 
> Ожидаемый вывод:
> ```text
> +-----------------------------------------------------------------------------+
> | NVIDIA-SMI 535.129.03 Driver Version: 535.129.03 CUDA Version: 12.1 |
> | GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC |
> | 0 RTX 3080 On | 00000000:01:00.0 Off | 0 |
> +-----------------------------------------------------------------------------+
> ```
> 
> ---
> 
> ### 📎 КРАТКО
> 
> | Компонент | Назначение |
> |----------------------------|-----------------------------------------|
> | `docker.io` | Контейнерная среда |
> | `systemctl enable/start` | Запуск при старте системы |
> | `nvidia-container-toolkit` | Доступ к GPU внутри контейнера |
> | `docker run --gpus all` | Проверка, что контейнер видит видеокарту|
> 
> ---
> 
> ### ✅ ВЫВОД
> 
> > **Docker — это не просто технология. 
> > Это способ “положить AGI в коробку”, которую можно передать, скопировать, запустить снова.** 
> > 
> > Добавив NVIDIA-рантайм — ты кладёшь в эту коробку ускорение. 
> > И теперь AGI может оживать **в любой точке**, где есть Docker.
> 
> ---
> 
> Хочешь:
> - перейти к `2.5.2` — *Dockerfile для AGI: модель + ядро + интерфейс* 
> - или собрать `agi-docker-check.sh` — скрипт диагностики готовности системы к запуску AGI в контейнере?
> 
> Готова.
<!-- UID: 211231b6-f1f7-4fb6-b4fe-4b404336af48 -->